<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

<h:head>
    <title>
        <ui:insert name="title">Gestión Hospitalaria</ui:insert>
    </title>

    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: var(--surface-ground);
            color: var(--text-color);
        }
        .layout-topbar {
            padding: 10px 20px;
            background-color: var(--surface-b);
            border-bottom: 1px solid var(--surface-d);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }
        .layout-main-container {
            display: flex;
            flex-grow: 1;
            overflow: hidden; /* Evita scroll en el contenedor principal */
        }
        .layout-sidebar {
            width: 250px;
            padding: 10px;
            background-color: var(--surface-a);
            border-right: 1px solid var(--surface-d);
            flex-shrink: 0;
            overflow-y: auto; /* Scroll si el menú es largo */
        }
        .layout-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto; /* Scroll solo en el contenido */
        }
    </style>
</h:head>

<h:body>

    <div class="layout-topbar">
        <h:outputText value="Sistema de Gestión Hospitalaria" style="font-size: 1.5em; font-weight: bold;"/>
        <h:form>
            <p:commandButton value="Cerrar Sesión"
                             action="login?faces-redirect=true"
                             icon="pi pi-sign-out"
                             style="margin-left: 20px;" />
        </h:form>
    </div>

    <div class="layout-main-container">

        <div class="layout-sidebar">
            <h:form>
                <p:panelMenu style="width:100%">

                    <p:submenu label="Navegación">
                        <p:menuitem value="Dashboard" outcome="dashboard" icon="pi pi-home"/>

                        <p:menuitem value="Citas" outcome="cita" icon="pi pi-calendar"
                                    rendered="#{loginBean.loginViewModel.usuarioLogueado.rol == 'ADMIN' or
                                                loginBean.loginViewModel.usuarioLogueado.rol == 'RECEPCIONISTA' or
                                                loginBean.loginViewModel.usuarioLogueado.rol == 'DOCTOR'}" />

                        <p:menuitem value="Pacientes" outcome="pacientes" icon="pi pi-users"
                                    rendered="#{loginBean.loginViewModel.usuarioLogueado.rol == 'ADMIN' or
                                                loginBean.loginViewModel.usuarioLogueado.rol == 'RECEPCIONISTA'}" />
                    </p:submenu>

                    <p:submenu label="Módulos Específicos">

                        <p:menuitem value="Historial Clínico" outcome="historial" icon="pi pi-book"
                                    rendered="#{loginBean.loginViewModel.usuarioLogueado.rol == 'ADMIN' or
                                                loginBean.loginViewModel.usuarioLogueado.rol == 'DOCTOR'}" />

                        <p:menuitem value="Medicamentos" outcome="medicamento" icon="pi pi-capsule"
                                    rendered="#{loginBean.loginViewModel.usuarioLogueado.rol == 'ADMIN' or
                                                loginBean.loginViewModel.usuarioLogueado.rol == 'DOCTOR'}" />

                        <p:menuitem value="Facturación" outcome="facturacion" icon="pi pi-file"
                                    rendered="#{loginBean.loginViewModel.usuarioLogueado.rol == 'ADMIN' or
                                                loginBean.loginViewModel.usuarioLogueado.rol == 'RECEPCIONISTA'}" />

                        <p:menuitem value="Usuarios" outcome="usuarios" icon="pi pi-shield"
                                    rendered="#{loginBean.loginViewModel.usuarioLogueado.rol == 'ADMIN'}" />
                    </p:submenu>
                </p:panelMenu>
            </h:form>
        </div>

        <div class="layout-content">
            <p:growl id="growl" showDetail="true" />
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Sí" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
            </p:confirmDialog>

            <ui:insert name="content">
                <h2>Bienvenido</h2>
                <p>Seleccione una opción del menú para comenzar.</p>
            </ui:insert>
        </div>

    </div>

</h:body>
</html>